(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@d3fc/d3fc-data-join"),require("d3-shape"),require("d3-selection"),require("@d3fc/d3fc-rebind"),require("d3-scale"),require("@d3fc/d3fc-webgl"),require("@d3fc/d3fc-shape"),require("d3-array"),require("d3-scale-chromatic")):"function"==typeof define&&define.amd?define(["exports","@d3fc/d3fc-data-join","d3-shape","d3-selection","@d3fc/d3fc-rebind","d3-scale","@d3fc/d3fc-webgl","@d3fc/d3fc-shape","d3-array","d3-scale-chromatic"],t):(e="undefined"==typeof globalThis?e||self:globalThis,t(e.fc=e.fc||{},e.fc,e.d3,e.d3,e.fc,e.d3,e.fc,e.fc,e.d3,e.d3))})(this,function(e,t,a,l,i,r,n,d,s,c){'use strict';function o(){var e=arguments;return function(t,a){for(var l=0,i=e.length;l<i;l++)if(null==e[l](t,a))return!1;return!0}}function h(e){return g(e)||u(e)||b(e)||w()}function g(e){if(Array.isArray(e))return p(e)}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function b(e,t){if(e){if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f=function(e){return"function"==typeof e?e:function(){return e}},S=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},y=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},x=function(){var e=function(){return 0},t=function(e){return e.x},a=function(e){return e.y},l="center",n=function(){return 5},s="vertical",c=y({decorate:function(){},defined:function(l,r){return o(e,t,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return c.values=function(r,d){var i=n(r,d),o=S(l,i),h=c.xScale(),g=c.yScale();if("vertical"===s){var u=g(a(r,d),d),b=g(e(r,d),d),p=h(t(r,d),d)+o;return{d:r,x:p,y:u,y0:b,width:i,height:u-b,origin:[p,u],baseOrigin:[p,b],transposedX:p,transposedY:u}}var w=h(a(r,d),d),f=h(e(r,d),d),y=g(t(r,d),d)+o;return{d:r,x:y,y:w,y0:f,width:i,height:w-f,origin:[w,y],baseOrigin:[f,y],transposedX:w,transposedY:y}},c.xValues=function(){return"vertical"===s?[t]:[e,a]},c.yValues=function(){return"vertical"===s?[e,a]:[t]},c.baseValue=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),c):e},c.crossValue=function(){return arguments.length?(t=f(0>=arguments.length?void 0:arguments[0]),c):t},c.mainValue=function(){return arguments.length?(a=f(0>=arguments.length?void 0:arguments[0]),c):a},c.bandwidth=function(){return arguments.length?(n=f(0>=arguments.length?void 0:arguments[0]),c):n},c.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],c):l},c.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],c):s},c},v={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},A=function(){var e=x(),r=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),n=t.dataJoin("path","line"),d=function(a){t.isTransition(a)&&n.transition(a),r.defined(e.defined()),a.each(function(t,a,i){var d=n(l.select(i[a]),[t]);d.enter().attr("fill","none").attr("stroke",v.black),d.attr("d",r),e.decorate()(d,t,a)})};return i.rebindAll(d,e,i.exclude("baseValue","bandwidth","align")),i.rebind(d,n,"key"),i.rebind(d,r,"curve"),d},V=function(){var e=x(),t=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),l=function(a){var l=t.context();l.beginPath(),l.strokeStyle=v.black,l.fillStyle="transparent",e.decorate()(l,a),t.defined(e.defined())(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("baseValue","bandwidth","align")),i.rebind(l,t,"curve","context"),l},m=function(){var e=x(),t=n.webglAdjacentAttribute(-1,2),a=t.offset(-1),l=t.offset(1),r=t.offset(2),d=n.webglAdjacentAttribute(-1,2),s=d.offset(-1),c=d.offset(1),o=d.offset(2),h=n.webglAdjacentAttribute(0,1).type(n.webglTypes.UNSIGNED_BYTE),g=h.offset(1),u=n.webglSeriesLine().crossPreviousValueAttribute(a).crossValueAttribute(t).crossNextValueAttribute(l).crossNextNextValueAttribute(r).mainPreviousValueAttribute(s).mainValueAttribute(d).mainNextValueAttribute(c).mainNextNextValueAttribute(o).definedAttribute(h).definedNextAttribute(g),b=function(){return!1},p=n.webglScaleMapper,w=[],f=null,S=null,y=function(a){var l=p(e.xScale()),r=p(e.yScale()),n=!b(w,a);n&&(w=a,h.value(function(t,a){return e.defined()(t,a)}).data(a)),(n||l.scale!==f)&&(f=l.scale,"vertical"===e.orient()?t.value(function(t,a){return l.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return l.scale(e.mainValue()(t,a))}).data(a)),(n||r.scale!==S)&&(S=r.scale,"vertical"===e.orient()?d.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),u.xScale(l.webglScale).yScale(r.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),u(a.length)};return y.equals=function(){return arguments.length?(b=0>=arguments.length?void 0:arguments[0],y):b},y.scaleMapper=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],y):p},i.rebindAll(y,e,i.exclude("baseValue","bandwidth","align")),i.rebind(y,u,"context","lineWidth","pixelRatio"),y},k=function(){var e=function(e){return e.high},t=function(e){return e.low},a=function(e){return e.cross},l="vertical",n="center",s=function(){return 5},c=y({decorate:function(){},defined:function(l,r){return o(t,e,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return c.values=function(r,d){var i=s(r,d),o=S(n,i),h=c.xScale(),g=c.yScale();if("vertical"===l){var u=g(e(r,d));return{origin:[h(a(r,d))+o,u],high:0,low:g(t(r,d))-u,width:i}}var b=h(t(r,d));return{origin:[b,g(a(r,d))+o],high:h(e(r,d))-b,low:0,width:i}},c.xValues=function(){return"vertical"===l?[a]:[e,t]},c.yValues=function(){return"vertical"===l?[e,t]:[a]},c.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],c):l},c.lowValue=function(){return arguments.length?(t=f(0>=arguments.length?void 0:arguments[0]),c):t},c.highValue=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),c):e},c.crossValue=function(){return arguments.length?(a=f(0>=arguments.length?void 0:arguments[0]),c):a},c.bandwidth=function(){return arguments.length?(s=f(0>=arguments.length?void 0:arguments[0]),c):s},c.align=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c},T=function(){var e,t=function(e){return e.date},a=function(e){return e.open},l=function(e){return e.high},n=function(e){return e.low},s=function(e){return e.close},c=function(){return 5},h="center",g=function(a,l){return e.xScale()(t(a,l))};return e=y({decorate:function(){},defined:function(e,r){return o(t,a,n,l,s)(e,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()}),e.values=function(t,r){var i=s(t,r),d=a(t,r),o=c(t,r),u=S(h,o),b="";return i>d?b="up":i<d&&(b="down"),{cross:g(t,r)+u,open:e.yScale()(d),high:e.yScale()(l(t,r)),low:e.yScale()(n(t,r)),close:e.yScale()(i),width:o,direction:b}},e.xValues=function(){return[t]},e.yValues=function(){return[a,l,n,s]},e.crossValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e):t},e.openValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e):a},e.highValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e):l},e.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e):n},e.yValue=e.closeValue=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],e):s},e.bandwidth=function(){return arguments.length?(c=f(0>=arguments.length?void 0:arguments[0]),e):c},e.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],e):h},e},N=function(e,a){var r=T(),n=t.dataJoin("g",a),s=function(e){return"translate("+e.cross+", "+e.high+")"},c=function(e){return function(a){return t.isTransition(e)?a.transition(e):a}},o=function(i){t.isTransition(i)&&n.transition(i);var o=c(i);i.each(function(t,i,d){var c=t.filter(r.defined()),h=n(l.select(d[i]),c);h.enter().attr("transform",function(e,t){return s(r.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(t,n,i){var d=r.values(t,n),c="up"===d.direction?v.green:v.red,h=o(l.select(i[n])).attr("class",a+" "+d.direction).attr("stroke",c).attr("fill",c).attr("transform",function(){return s(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),h.select("path").attr("d",e([t]))}),r.decorate()(h,t,i)})};return i.rebind(o,n,"key"),i.rebindAll(o,r),o},E=function(e){var t=T(),a=function(a){var l=a.filter(t.defined()),r=e.context();l.forEach(function(a,l){r.save();var i=t.values(a,l);r.translate(i.cross,i.high),r.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var n="up"===i.direction?v.green:v.red;r.strokeStyle=n,r.fillStyle=n,t.decorate()(r,a,l),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebind(a,e,"context"),i.rebindAll(a,t),a},B=function(e){var t=T(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute(),d=n.webglAttribute(),s=n.webglAttribute(),c=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),o=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(l).highValueAttribute(r).lowValueAttribute(d).closeValueAttribute(s).bandwidthAttribute(c).definedAttribute(o);var h=function(){return!1},g=n.webglScaleMapper,u=[],b=null,p=null,w=function(i){var n=g(t.xScale()),w=g(t.yScale()),f=!h(u,i);f&&(u=i,c.value(function(e,a){return t.bandwidth()(e,a)}).data(i),o.value(function(e,a){return t.defined()(e,a)}).data(i)),(f||n.scale!==b)&&(b=n.scale,a.value(function(e,a){return n.scale(t.crossValue()(e,a))}).data(i)),(f||w.scale!==p)&&(p=w.scale,l.value(function(e,a){return w.scale(t.openValue()(e,a))}).data(i),r.value(function(e,a){return w.scale(t.highValue()(e,a))}).data(i),d.value(function(e,a){return w.scale(t.lowValue()(e,a))}).data(i),s.value(function(e,a){return w.scale(t.closeValue()(e,a))}).data(i)),e.xScale(n.webglScale).yScale(w.webglScale).decorate(function(e){return t.decorate()(e,i,0)}),e(i.length)};return w.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],w):h},w.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],w):g},i.rebindAll(w,t,i.exclude("align")),i.rebind(w,e,"context","lineWidth","pixelRatio"),w},I=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},a=function(e){return e.high},l=function(e){return e.low},n=function(e){return e.value},s=function(e){return e.median},c="vertical",h="center",g=function(){return 5},u=y({decorate:function(){},defined:function(r,d){return o(l,a,t,e,n,s)(r,d)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return u.values=function(r,d){var i=g(r,d),o=S(h,i),b=u.xScale(),p=u.yScale();if("vertical"===c){var w=p(a(r,d));return{origin:[b(n(r,d))+o,w],high:0,upperQuartile:p(e(r,d))-w,median:p(s(r,d))-w,lowerQuartile:p(t(r,d))-w,low:p(l(r,d))-w,width:i}}var f=b(l(r,d));return{origin:[f,p(n(r,d))+o],high:b(a(r,d))-f,upperQuartile:b(e(r,d))-f,median:b(s(r,d))-f,lowerQuartile:b(t(r,d))-f,low:0,width:i}},u.xValues=function(){return"vertical"===c?[n]:[e,t,a,l,s]},u.yValues=function(){return"vertical"===c?[e,t,a,l,s]:[n]},u.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u.lowerQuartileValue=function(){return arguments.length?(t=f(0>=arguments.length?void 0:arguments[0]),u):t},u.upperQuartileValue=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),u):e},u.lowValue=function(){return arguments.length?(l=f(0>=arguments.length?void 0:arguments[0]),u):l},u.highValue=function(){return arguments.length?(a=f(0>=arguments.length?void 0:arguments[0]),u):a},u.crossValue=function(){return arguments.length?(n=f(0>=arguments.length?void 0:arguments[0]),u):n},u.medianValue=function(){return arguments.length?(s=f(0>=arguments.length?void 0:arguments[0]),u):s},u.bandwidth=function(){return arguments.length?(g=f(0>=arguments.length?void 0:arguments[0]),u):g},u.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],u):h},u},P=function(){var e=[],t=function(e){return e},a=function(e,t){return t},l=y({decorate:function(){},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return l.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},l.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},l.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l},G=function(){var e=P(),a=t.dataJoin("g"),r=t.dataJoin("g","multi"),n=function(i){t.isTransition(i)&&(r.transition(i),a.transition(i));var n=e.mapping(),d=e.series(),s=e.xScale(),c=e.yScale();i.each(function(t,i,o){var h=r(l.select(o[i]),d);h.each(function(e,i,r){e.xScale(s).yScale(c);var o=n(t,i,d),h=a(l.select(r[i]),[o]);h.call(e)}),h.selection().order(),e.decorate()(h,t,i)})};return i.rebindAll(n,e),i.rebind(n,r,"key"),n},M=function(){var e=null,t=P(),a=function(a){var l=t.mapping(),i=t.series(),r=t.xScale(),n=t.yScale();i.forEach(function(d,s){var c=l(a,s,i);d.context(e).xScale(r).yScale(n);var o;d.decorate?(o=d.decorate(),d.decorate(function(e,l,r){t.decorate()(e,a,s),o(e,l,r)})):t.decorate()(e,a,s),d(c),o&&d.decorate(o)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},i.rebindAll(a,t),a},Q=function(){var e=null,t=1,a=P(),l=function(l){var i=a.mapping(),r=a.series(),n=a.xScale(),d=a.yScale();r.forEach(function(s,o){var h=i(l,o,r);s.context(e).pixelRatio(t).xScale(n).yScale(d);var g;s.decorate?(g=s.decorate(),s.decorate(function(e,t,r){a.decorate()(e,l,o),g(e,t,r)})):a.decorate()(e,l,o),s(h),g&&s.decorate(g)})};return l.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.pixelRatio=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},i.rebindAll(l,a),l},D=function(){var e=function(){return 50},t="center",a=r.scaleBand(),l=y({decorate:function(){},xScale:r.scaleLinear(),yScale:r.scaleLinear()});return l.offsetScaleForDatum=function(l,r,n){var i=e(r,n),d=S(t,i),c=i/2;return a.domain(s.range(0,l.length)).range([-c+d,c+d])},l.bandwidth=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),l):e},l.align=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},i.rebindAll(l,a,i.includeMap({paddingInner:"paddingOuter"})),l},C=function(e){return e.sort(s.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},R=function(){var e=function(e){return e.x},t=function(e){return e.y},a=function(e){return e.color},l=function(){return 5},n=function(){return 5},h=c.interpolateViridis,g=y({decorate:function(){},defined:function(l,r){return o(e,t,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return g.pathGenerator=d.shapeBar().x(0).y(0),g.colorScale=function(e){var t=e.map(a);return r.scaleLinear().domain([s.min(t),s.max(t)])},g.values=function(r,d){return{x:g.xScale()(e(r,d)),y:g.yScale()(t(r,d)),colorValue:a(r,d),width:n(r,d),height:l(r,d)}},g.xValues=function(){return[e]},g.yValues=function(){return[t]},g.xValue=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),g):e},g.yValue=function(){return arguments.length?(t=f(0>=arguments.length?void 0:arguments[0]),g):t},g.colorValue=function(){return arguments.length?(a=f(0>=arguments.length?void 0:arguments[0]),g):a},g.colorInterpolate=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],g):h},g.xBandwidth=function(){return arguments.length?(n=f(0>=arguments.length?void 0:arguments[0]),g):n},g.yBandwidth=function(){return arguments.length?(l=f(0>=arguments.length?void 0:arguments[0]),g):l},i.rebindAll(g,g.pathGenerator,i.includeMap({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),g};e.autoBandwidth=function(e){var t=.75,a=function(e){if(1>=e.length)return 10;e=C(e);var a=s.pairs(e).map(function(e){var t=Math.abs;return t(e[0]-e[1])}),l=s.min(a);return t*l},r=function(t,l,i){if(t.bandwidth)return t.bandwidth();var r,n=Array.isArray(l)?(r=[]).concat.apply(r,h(l)):l,d=n.filter(e.defined()).map(i()).map(t),s=a(d);return s},n=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(r(e.xScale(),t,e.xValue)),e.yBandwidth(r(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(r(a,t,e.crossValue))}};t instanceof l.selection?t.each(function(t,i,r){a(t),e(l.select(r[i]))}):(a(t),e(t))};return i.rebindAll(n,e),n.widthFraction=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n},e.seriesCanvasArea=function(){var e=x(),t=a.area(),l=function(a){var l=t.context();t.defined(e.defined());var r=a.map(e.values);t.x(function(e,t){return r[t].transposedX}).y(function(e,t){return r[t].transposedY});var n="vertical"===e.orient()?"y":"x";t[n+"0"](function(e,t){return r[t].y0}),t[n+"1"](function(e,t){return r[t].y}),l.beginPath(),l.fillStyle=v.gray,l.strokeStyle="transparent",e.decorate()(l,a),t(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("bandwidth","align")),i.rebind(l,t,"curve","context"),l},e.seriesCanvasBar=function(){var e=x(),t=d.shapeBar().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},l=function(t){return"vertical"===e.orient()?t.width:t.height},r=function(i){var r=t.context(),n=i.filter(e.defined()),d=n.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),d.forEach(function(n,d){r.save(),r.beginPath(),r.translate(n.origin[0],n.origin[1]),r.fillStyle=v.darkGray,r.strokeStyle="transparent",e.decorate()(r,n.d,d),a(t)(-n.height),l(t)(n.width),t([n]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(r,e),i.rebind(r,t,"context"),r},e.seriesCanvasBoxPlot=function(){var e=I(),t=d.shapeBoxPlot().value(0),a=function(a){var l=a.filter(e.defined()),r=t.context();t.orient(e.orient()),l.forEach(function(a,l){r.save();var i=e.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.fillStyle=v.gray,r.strokeStyle=v.black,e.decorate()(r,a,l),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return E(d.shapeCandlestick())},e.seriesCanvasErrorBar=function(){var e=k(),t=d.shapeErrorBar().value(0),a=function(a){var l=a.filter(e.defined()),r=t.context();t.orient(e.orient()),l.forEach(function(a,l){r.save();var i=e.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.strokeStyle=v.black,r.fillStyle=v.gray,e.decorate()(r,a,l),t.high(i.high).width(i.width).low(i.low)([a]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=D(),a=function(a){a.forEach(function(l,r){var n="horizontal"!==e.orient(),d=function(e,l){var i=t.offsetScaleForDatum(a,e,l),d=n?t.xScale():t.yScale();return d(e)+i(r)+i.bandwidth()/2};n?(e.xScale(d),e.yScale(t.yScale())):(e.yScale(d),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return t.offsetScaleForDatum(a,e,l).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,r)}),e(l)})};return i.rebindAll(a,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(a,t,i.exclude("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=R(),t=function(t){var a=t.filter(e.defined()),l=e.colorInterpolate(),r=e.colorScale(a),n=e.pathGenerator.context();a.forEach(function(t,a){n.save(),n.beginPath();var i=e.values(t,a);n.translate(i.x,i.y),n.fillStyle=l(r(i.colorValue)),n.strokeStyle="transparent",e.decorate()(n,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebind(t,e.pathGenerator,"context"),i.rebindAll(t,e),t},e.seriesCanvasLine=V,e.seriesCanvasMulti=M,e.seriesCanvasOhlc=function(){return E(d.shapeOhlc())},e.seriesCanvasPoint=function(){var e=a.symbol(),t=x(),l=function(a){var l=a.filter(t.defined()),r=e.context();l.forEach(function(a,l){r.save();var i=t.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.strokeStyle=v.black,r.fillStyle=v.gray,t.decorate()(r,a,l),e(a,l),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(l,t,i.exclude("baseValue","bandwidth","align")),i.rebind(l,e,"size","type","context"),l},e.seriesCanvasRepeat=function(){var e="vertical",t=V(),a=M(),l=function(l){"vertical"===e?a.series(l[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(l.map(function(){return t})).mapping(function(e,t){return e[t]}),a(l)};return l.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},i.rebindAll(l,a,i.exclude("series","mapping")),l},e.seriesSvgArea=function(){var e=x(),r=a.area(),n=t.dataJoin("path","area"),d=function(a){t.isTransition(a)&&n.transition(a),r.defined(e.defined()),a.each(function(t,a,i){var d=t.map(e.values);r.x(function(e,t){return d[t].transposedX}).y(function(e,t){return d[t].transposedY});var s="vertical"===e.orient()?"y":"x";r[s+"0"](function(e,t){return d[t].y0}),r[s+"1"](function(e,t){return d[t].y});var c=n(l.select(i[a]),[t]);c.enter().attr("fill",v.gray),c.attr("d",r),e.decorate()(c,t,a)})};return i.rebindAll(d,e,i.exclude("bandwidth","align")),i.rebind(d,n,"key"),i.rebind(d,r,"curve"),d},e.seriesSvgBar=function(){var e=d.shapeBar().x(0).y(0),a=x(),r=t.dataJoin("g","bar"),n=function(e){return"vertical"===a.orient()?e.height:e.width},s=function(e){return"vertical"===a.orient()?e.width:e.height},c=function(e){return"translate("+e[0]+", "+e[1]+")"},o=function(i){t.isTransition(i)&&r.transition(i),i.each(function(t,i,d){var o=a.orient();if("vertical"!==o&&"horizontal"!==o)throw new Error("The bar series does not support an orientation of "+o);var h=t.filter(a.defined()),u=h.map(a.values);e.width(0).height(0),"vertical"===a.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var b=r(l.select(d[i]),h);b.enter().attr("transform",function(e,t){return c(u[t].baseOrigin)}).attr("class","bar "+a.orient()).attr("fill",v.darkGray).append("path").attr("d",function(t,a){return s(e)(u[a].width),e([t])}),b.attr("transform",function(e,t){return c(u[t].origin)}).select("path").attr("d",function(t,a){return s(e)(u[a].width),n(e)(-u[a].height),e([t])}),a.decorate()(b,h,i)})};return i.rebindAll(o,a),i.rebind(o,r,"key"),o},e.seriesSvgBoxPlot=function(){var e=I(),a=t.dataJoin("g","box-plot"),r=d.shapeBoxPlot().value(0),n=function(e){return function(a){return t.isTransition(e)?a.transition(e):a}},s=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},c=function(i){t.isTransition(i)&&a.transition(i);var c=n(i);i.each(function(t,i,n){var d=t.filter(e.defined()),o=a(l.select(n[i]),d);o.enter().attr("stroke",v.black).attr("fill",v.gray).attr("transform",function(t,a){return s(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),r.orient(e.orient()),o.each(function(t,a,i){var n=e.values(t,a);r.median(n.median).upperQuartile(n.upperQuartile).lowerQuartile(n.lowerQuartile).width(n.width).high(n.high).low(n.low),c(l.select(i[a])).attr("transform",s(n)).select("path").attr("d",r([t]))}),e.decorate()(o,t,i)})};return i.rebindAll(c,e),i.rebind(c,a,"key"),i.rebind(c,r,"cap"),c},e.seriesSvgCandlestick=function(){return N(d.shapeCandlestick(),"candlestick")},e.seriesSvgErrorBar=function(){var e=k(),a=t.dataJoin("g","error-bar"),r=d.shapeErrorBar().value(0),n=function(e){return function(a){return t.isTransition(e)?a.transition(e):a}},s=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},c=function(i){t.isTransition(i)&&a.transition(i);var c=n(i);i.each(function(t,i,n){var d=t.filter(e.defined()),o=d.map(e.values),h=a(l.select(n[i]),d);h.enter().attr("stroke",v.black).attr("fill",v.gray).attr("transform",function(t,a){return s(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),r.orient(e.orient()),h.each(function(e,t,a){var i=o[t];r.high(i.high).low(i.low).width(i.width),c(l.select(a[t])).attr("transform",s(i)+" scale(1)").select("path").attr("d",r([e]))}),e.decorate()(h,t,i)})};return i.rebindAll(c,e),i.rebind(c,a,"key"),c},e.seriesSvgGrouped=function(e){var a=D(),r=t.dataJoin("g","grouped"),n=function(i){t.isTransition(i)&&r.transition(i),i.each(function(t,i,n){var d=r(l.select(n[i]),t);d.enter().append("g"),d.select("g").each(function(i,r,n){var d=l.select(n[r]),s="horizontal"!==e.orient(),c=function(e,l){var i=a.offsetScaleForDatum(t,e,l),n=s?a.xScale():a.yScale();return n(e)+i(r)+i.bandwidth()/2};s?(e.xScale(c),e.yScale(a.yScale())):(e.yScale(c),e.xScale(a.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return a.offsetScaleForDatum(t,e,l).bandwidth()}),e.decorate(function(e,t){return a.decorate()(e,t,r)}),d.call(e)})})};return i.rebindAll(n,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(n,a,i.exclude("offsetScaleForDatum")),n},e.seriesSvgHeatmap=function(){var e=R(),a=t.dataJoin("g","box"),r=function(e){return"translate("+e.x+", "+e.y+")"},n=function(t){t.each(function(t,i,n){var d=t.filter(e.defined()),s=e.colorValue(),c=e.colorInterpolate(),o=e.colorScale(d),h=a(l.select(n[i]),d);h.enter().append("path").attr("stroke","transparent"),h.attr("transform",function(t,a){return r(e.values(t,a))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return c(o(s(e,t)))}),e.decorate()(h,t,i)})};return i.rebindAll(n,e),n},e.seriesSvgLine=A,e.seriesSvgMulti=G,e.seriesSvgOhlc=function(){return N(d.shapeOhlc(),"ohlc")},e.seriesSvgPoint=function(){var e=a.symbol(),r=x(),n=t.dataJoin("g","point"),s=function(e){return"translate("+e[0]+", "+e[1]+")"},c=function(a){t.isTransition(a)&&n.transition(a),a.each(function(t,a,i){var d=t.filter(r.defined()),c=n(l.select(i[a]),d);c.enter().attr("transform",function(e,t){return s(r.values(e,t).origin)}).attr("fill",v.gray).attr("stroke",v.black).append("path"),c.attr("transform",function(e,t){return s(r.values(e,t).origin)}).select("path").attr("d",e),r.decorate()(c,t,a)})};return i.rebindAll(c,r,i.exclude("baseValue","bandwidth","align")),i.rebind(c,n,"key"),i.rebind(c,e,"type","size"),c},e.seriesSvgRepeat=function(){var e="vertical",t=A(),a=G(),r=function(i){return i.each(function(i,r,n){"vertical"===e?a.series(i[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(i.map(function(){return t})).mapping(function(e,t){return e[t]}),l.select(n[r]).call(a)})};return r.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},i.rebindAll(r,a,i.exclude("series","mapping")),r},e.seriesWebglArea=function(){var e=x(),t=n.webglAdjacentAttribute(0,1),a=t.offset(1),l=n.webglAdjacentAttribute(0,1),r=l.offset(1),d=n.webglAdjacentAttribute(0,1),s=d.offset(1),c=n.webglAdjacentAttribute(0,1).type(n.webglTypes.UNSIGNED_BYTE),o=c.offset(1),h=n.webglSeriesArea().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(l).mainNextValueAttribute(r).baseValueAttribute(d).baseNextValueAttribute(s).definedAttribute(c).definedNextAttribute(o),g=function(){return!1},u=n.webglScaleMapper,b=[],p=null,w=null,f=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=u(e.xScale()),n=u(e.yScale()),s=!g(b,a);s&&(b=a,c.value(function(t,a){return e.defined()(t,a)}).data(a)),(s||r.scale!==p)&&(p=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),(s||n.scale!==w)&&(w=n.scale,d.value(function(t,a){return n.scale(e.baseValue()(t,a))}).data(a),l.value(function(t,a){return n.scale(e.mainValue()(t,a))}).data(a)),h.xScale(r.webglScale).yScale(n.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),h(a.length)};return f.equals=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],f):g},f.scaleMapper=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],f):u},i.rebindAll(f,e,i.exclude("bandwidth","align")),i.rebind(f,h,"context","pixelRatio"),f},e.seriesWebglBar=function(){var e=x(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),d=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),s=n.webglSeriesBar().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(l).bandwidthAttribute(r).definedAttribute(d),c=function(){return!1},o=n.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=o(e.xScale()),b=o(e.yScale()),p=!c(h,i);p&&(h=i,r.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||n.scale!==g)&&(g=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,l.value(function(t,a){return b.scale(e.baseValue()(t,a))}).data(i),a.value(function(t,a){return b.scale(e.mainValue()(t,a))}).data(i)),s.xScale(n.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),s(i.length)};return b.equals=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],b):c},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,s,"context","pixelRatio"),b},e.seriesWebglBoxPlot=function(){var e=I(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute(),d=n.webglAttribute(),s=n.webglAttribute(),c=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),o=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),h=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),g=n.webglSeriesBoxPlot().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(l).medianValueAttribute(r).lowerQuartileValueAttribute(d).lowValueAttribute(s).bandwidthAttribute(c).capAttribute(o).definedAttribute(h),u=function(){return!1},b=n.webglScaleMapper,p=[],w=null,S=null,y=f(20),x=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=b(e.xScale()),f=b(e.yScale()),x=!u(p,i);x&&(p=i,c.value(function(t,a){return e.bandwidth()(t,a)}).data(i),o.value(function(e,t){return y(e,t)}).data(i),h.value(function(t,a){return e.defined()(t,a)}).data(i)),(x||n.scale!==w)&&(w=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(x||f.scale!==S)&&(S=f.scale,a.value(function(t,a){return f.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return f.scale(e.upperQuartileValue()(t,a))}).data(i),r.value(function(t,a){return f.scale(e.medianValue()(t,a))}).data(i),d.value(function(t,a){return f.scale(e.lowerQuartileValue()(t,a))}).data(i),s.value(function(t,a){return f.scale(e.lowValue()(t,a))}).data(i)),g.xScale(n.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),g(i.length)};return x.cap=function(){return arguments.length?(y=f(0>=arguments.length?void 0:arguments[0]),x):y},x.equals=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],x):u},x.scaleMapper=function(){return arguments.length?(b=0>=arguments.length?void 0:arguments[0],x):b},i.rebindAll(x,e,i.exclude("align")),i.rebind(x,g,"context","lineWidth","pixelRatio"),x},e.seriesWebglCandlestick=function(){return B(n.webglSeriesCandlestick())},e.seriesWebglErrorBar=function(){var e=k(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),d=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),s=n.webglSeriesErrorBar().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(l).bandwidthAttribute(r).definedAttribute(d),c=function(){return!1},o=n.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=o(e.xScale()),b=o(e.yScale()),p=!c(h,i);p&&(h=i,r.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||n.scale!==g)&&(g=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,a.value(function(t,a){return b.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return b.scale(e.lowValue()(t,a))}).data(i)),s.xScale(n.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),s(i.length)};return b.equals=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],b):c},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,s,"context","lineWidth","pixelRatio"),b},e.seriesWebglLine=m,e.seriesWebglMulti=Q,e.seriesWebglOhlc=function(){return B(n.webglSeriesOhlc())},e.seriesWebglPoint=function(){var e=x(),t=f(64),l=a.symbolCircle,r=n.webglAttribute(),d=n.webglAttribute(),s=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),c=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),o=n.webglSeriesPoint().crossValueAttribute(r).mainValueAttribute(d).sizeAttribute(s).definedAttribute(c),h=function(){return!1},g=n.webglScaleMapper,u=[],b=null,p=null,w=function(a){var w=g(e.xScale()),f=g(e.yScale()),S=!h(u,a);S&&(u=a,s.value(function(e,a){return t(e,a)}).data(a),c.value(function(t,a){return e.defined()(t,a)}).data(a)),(S||w.scale!==b)&&(b=w.scale,"vertical"===e.orient()?r.value(function(t,a){return w.scale(e.crossValue()(t,a))}).data(a):r.value(function(t,a){return w.scale(e.mainValue()(t,a))}).data(a)),(S||f.scale!==p)&&(p=f.scale,"vertical"===e.orient()?d.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(a)),o.xScale(w.webglScale).yScale(f.webglScale).type(n.webglSymbolMapper(l)).decorate(function(t){return e.decorate()(t,a,0)}),o(a.length)};return w.size=function(){return arguments.length?(t=f(0>=arguments.length?void 0:arguments[0]),w):t},w.type=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],w):l},w.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],w):h},w.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],w):g},i.rebindAll(w,e,i.exclude("baseValue","bandwidth","align")),i.rebind(w,o,"context","pixelRatio"),w},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return m()},a=Q(),l=[],r=function(i){if("vertical"===e){var r=l;l=i[0].map(function(e,a){return a<r.length?r[a]:t()}),a.series(l).mapping(function(e,t){return e.map(function(e){return e[t]})})}else{var n=l;l=i.map(function(e,a){return a<n.length?n[a]:t()}),a.series(l).mapping(function(e,t){return e[t]})}a(i)};return r.series=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return a.length?(t="function"==typeof a[0].xScale&&"function"==typeof a[0].yScale?function(){return a[0]}:a[0],l=[],r):t},r.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l=[],r):e},i.rebindAll(r,a,i.exclude("series","mapping")),r},Object.defineProperty(e,"__esModule",{value:!0})});
